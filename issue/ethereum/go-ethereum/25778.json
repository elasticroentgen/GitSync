{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25778",
  "id": 1375179943,
  "node_id": "I_kwDOAOvK985R95Sn",
  "number": 25778,
  "title": "Running geth with beacon chain",
  "user": {
    "login": "sealbox",
    "id": 97301135,
    "node_id": "U_kgDOBcyyjw",
    "avatar_url": "https://avatars.githubusercontent.com/u/97301135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sealbox",
    "html_url": "https://github.com/sealbox",
    "followers_url": "https://api.github.com/users/sealbox/followers",
    "following_url": "https://api.github.com/users/sealbox/following{/other_user}",
    "gists_url": "https://api.github.com/users/sealbox/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sealbox/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sealbox/subscriptions",
    "organizations_url": "https://api.github.com/users/sealbox/orgs",
    "repos_url": "https://api.github.com/users/sealbox/repos",
    "events_url": "https://api.github.com/users/sealbox/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sealbox/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-09-15T22:53:59Z",
  "updated_at": "2022-09-19T08:38:22Z",
  "closed_at": "2022-09-16T09:10:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello,\r\nI would like to get a clarification what is the relation between geth and so-called beacon node after merge? If I understood it correctly, geth is exchanging information with beacon chain in now and it requires beacon chain for syncing?\r\n\r\nSo I picked the prysm beacon chain implementation as it looked the easiest to run, but I cannot make it work.\r\n\r\nMy folder structure is as follows:\r\n\r\n```\r\n/home/eth\r\n    /.ethereum # data\r\n    /node # geth (1.10.24)\r\n    /node_beacon # prysm (3.1.1)\r\n```\r\n\r\nI whitelisted all TCP, UDP ports required for running both and checked with  MX Toolbox that ports are discoverable (RPC and P2P for both geth and prysm).\r\n\r\nI am running geth with following options:\r\n\r\n```\r\n/home/eth/node/build/bin/geth --cache=4096 --http --http.api eth,web3,net,engine,debug,personal --http.addr 0.0.0.0 --http.port 12001 --port 30303 --datadir=/home/eth/.ethereum --allow-insecure-unlock --rpc.allow-unprotected-txs --authrpc.addr 0.0.0.0 --authrpc.port 8551 --authrpc.vhosts 0.0.0.0 --authrpc.jwtsecret /home/eth/node_beacon/jwt.hex\r\n```\r\n\r\nI am running prysm with following options:\r\n\r\n```\r\n/home/eth/node_beacon/prysm.sh beacon-chain --datadir=/home/eth/.ethereum --http-web3provider=http://127.0.0.1:12001 --rpc-host=0.0.0.0 --monitoring-host=0.0.0.0 --execution-endpoint=http://127.0.0.1:8551 --accept-terms-of-use --jwt-secret=/home/eth/node_beacon/jwt.hex\r\n```\r\n\r\nAnd both services seem to start up and run fine, I do not get any errors. However, after they are setup it seems the geth waits for prysm while prysm waits for geth:\r\n\r\nThose are the logs:\r\n\r\nGeth:\r\n```\r\nWARN [09-15|22:52:53.139] Local chain is post-merge, waiting for beacon client sync switch-over...\r\nINFO [09-15|22:50:49.891] Legacy sync reached merge threshold      number=15,537,419 hash=78c1c2..58cd79 td=58,750,256,312,486,924,353,244 ttd=58,750,000,000,000,000,000,000\r\n```\r\n\r\nPrysm:\r\n```\r\ntime=\"2022-09-15 22:51:18\" level=warning msg=\"Execution client is not syncing\" prefix=powchain\r\ntime=\"2022-09-15 22:51:22\" level=info msg=\"Waiting for enough suitable peers before syncing\" prefix=initial-sync required=3 suitable=0\r\n```\r\n\r\nFrom the logs it seems to me that geth waits for prysm to start doing something, while prysm complaining the geth is not syncing anything? What am I doing wrong? It's really unclear to me how to setup both properly.",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1248864709",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25778#issuecomment-1248864709",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778",
    "id": 1248864709,
    "node_id": "IC_kwDOAOvK985KcCnF",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-16T03:02:02Z",
    "updated_at": "2022-09-16T03:02:02Z",
    "author_association": "MEMBER",
    "body": "Are you running the script for prysm? `/home/eth/node_beacon/prysm.sh`\r\n\r\nFrom the log Geth is waiting signal from the beacon node while beacon node is not. Maybe prysm is the better place to ask the reason?\r\n\r\nPersonally I use lighthouse with this command\r\n\r\n```\r\nlighthouse beacon_node --execution-endpoint http://127.0.0.1:8551 --execution-jwt XXX --checkpoint-sync-url XXX --datadir ./beacon\r\n```\r\n\r\nYou can specify a checkpoint sync URL for fast bootstrapping, otherwise can take some time to initial sync the beacon node.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1248864709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1248969810",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25778#issuecomment-1248969810",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778",
    "id": 1248969810,
    "node_id": "IC_kwDOAOvK985KccRS",
    "user": {
      "login": "GeassV",
      "id": 16209445,
      "node_id": "MDQ6VXNlcjE2MjA5NDQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/16209445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GeassV",
      "html_url": "https://github.com/GeassV",
      "followers_url": "https://api.github.com/users/GeassV/followers",
      "following_url": "https://api.github.com/users/GeassV/following{/other_user}",
      "gists_url": "https://api.github.com/users/GeassV/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GeassV/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GeassV/subscriptions",
      "organizations_url": "https://api.github.com/users/GeassV/orgs",
      "repos_url": "https://api.github.com/users/GeassV/repos",
      "events_url": "https://api.github.com/users/GeassV/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GeassV/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-16T06:30:29Z",
    "updated_at": "2022-09-16T06:30:29Z",
    "author_association": "NONE",
    "body": "Any solution? Came to the same problem that geth stuck at height of 15537419 before I started the beacon node. However, I thought geth might recover after the beacon node finishes syncing, Prysm:\r\n`time=\"2022-09-16 14:14:48\" level=warning msg=\"Execution client is not syncing\" prefix=powchain`\r\n`time=\"2022-09-16 14:14:51\" level=info msg=\"Processing block batch of size 64 starting from  0xa1ad0523... 1629616/4707072 - estimated time remaining 53h25m41s\" blocksPerSecond=16.0 peers=39 prefix=initial-sync`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1248969810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1248971441",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25778#issuecomment-1248971441",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778",
    "id": 1248971441,
    "node_id": "IC_kwDOAOvK985Kccqx",
    "user": {
      "login": "Sreeram1993",
      "id": 57712569,
      "node_id": "MDQ6VXNlcjU3NzEyNTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/57712569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sreeram1993",
      "html_url": "https://github.com/Sreeram1993",
      "followers_url": "https://api.github.com/users/Sreeram1993/followers",
      "following_url": "https://api.github.com/users/Sreeram1993/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sreeram1993/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sreeram1993/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sreeram1993/subscriptions",
      "organizations_url": "https://api.github.com/users/Sreeram1993/orgs",
      "repos_url": "https://api.github.com/users/Sreeram1993/repos",
      "events_url": "https://api.github.com/users/Sreeram1993/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sreeram1993/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-16T06:32:49Z",
    "updated_at": "2022-09-16T06:33:46Z",
    "author_association": "NONE",
    "body": "@GeassV  As the message says your beacon node is not in sync, only once its in sync will the geth start resyncing. Had the same issue. You have to wait for the beacon node to complete its sync. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1248971441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1249119349",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25778#issuecomment-1249119349",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778",
    "id": 1249119349,
    "node_id": "IC_kwDOAOvK985KdAx1",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-16T09:10:09Z",
    "updated_at": "2022-09-16T09:10:09Z",
    "author_association": "MEMBER",
    "body": "You can also use a checkpoint sync from e.g. Infura or another trusted beacon client to sync it within a few minutes.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1249119349/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1249141937",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25778#issuecomment-1249141937",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778",
    "id": 1249141937,
    "node_id": "IC_kwDOAOvK985KdGSx",
    "user": {
      "login": "sealbox",
      "id": 97301135,
      "node_id": "U_kgDOBcyyjw",
      "avatar_url": "https://avatars.githubusercontent.com/u/97301135?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sealbox",
      "html_url": "https://github.com/sealbox",
      "followers_url": "https://api.github.com/users/sealbox/followers",
      "following_url": "https://api.github.com/users/sealbox/following{/other_user}",
      "gists_url": "https://api.github.com/users/sealbox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sealbox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sealbox/subscriptions",
      "organizations_url": "https://api.github.com/users/sealbox/orgs",
      "repos_url": "https://api.github.com/users/sealbox/repos",
      "events_url": "https://api.github.com/users/sealbox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sealbox/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-16T09:28:05Z",
    "updated_at": "2022-09-16T09:28:05Z",
    "author_association": "NONE",
    "body": "@karalabe don't you close my issue without answering the question. The geth is no longer standalone node so it needs the beacon to work properly. I do not see any documentation how to do properly on geth side and following prysm documentation I ma left around haning for not working sync. Answer the problem that was asked properly. You are just going closing all similar issues and yet, ppl have the same problem as me not able to find the proper answer. If you don't know just avoid this topic. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1249141937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1250728726",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25778#issuecomment-1250728726",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25778",
    "id": 1250728726,
    "node_id": "IC_kwDOAOvK985KjJsW",
    "user": {
      "login": "GeassV",
      "id": 16209445,
      "node_id": "MDQ6VXNlcjE2MjA5NDQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/16209445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GeassV",
      "html_url": "https://github.com/GeassV",
      "followers_url": "https://api.github.com/users/GeassV/followers",
      "following_url": "https://api.github.com/users/GeassV/following{/other_user}",
      "gists_url": "https://api.github.com/users/GeassV/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GeassV/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GeassV/subscriptions",
      "organizations_url": "https://api.github.com/users/GeassV/orgs",
      "repos_url": "https://api.github.com/users/GeassV/repos",
      "events_url": "https://api.github.com/users/GeassV/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GeassV/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-19T08:38:21Z",
    "updated_at": "2022-09-19T08:38:21Z",
    "author_association": "NONE",
    "body": "> You can also use a checkpoint sync from e.g. Infura or another trusted beacon client to sync it within a few minutes.\r\n\r\nThank you for the reminder. I rechecked the setting of checkpoint sync node and then used the official recommended one, which saved me dozens of hours. FYI: https://eth-clients.github.io/checkpoint-sync-endpoints/#mainnet",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1250728726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
